{% extends 'navbar.html' %}

{% block content %}

{% set update_book_id = [] %}

<div class="modal fade" role="dialog" tabindex="-1" id="addBookForm">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" style="color: #14274e;">Add New Book</h4><button type="button" class="close"
                    data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
                <form method="post" enctype="multipart/form-data">
                    <div class="form-group"><input class="form-control" type="text" placeholder="Title" name="name"
                            value="{{ request.form.name}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')"></div>
                    <div class="form-group"><input class="form-control" type="text" placeholder="Author" name="author"
                            value="{{ request.form.author}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')"></div>
                    <div class="form-group"><input class="form-control" type="text" placeholder="Publisher"
                            name="publisher" value="{{ request.form.publisher}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')"></div>
                    <div class="form-group"><input class="form-control" type="number" name="publish_year"
                            placeholder="Publish Year" value="{{ request.form.publish_year}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')"></div>
                    <div class="form-group"><input class="form-control" type="number" name="number_of_pages"
                            placeholder="Number of Pages" value="{{ request.form.number_of_pages}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')">
                    </div>
                    <div class="form-group"><input class="form-control" type="number" name="price" step="0.01" min="0"
                            placeholder="Price" value="{{ request.form.price}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')">
                    </div>
                    <div class="form-group">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <label class="input-group-text" for="conditionSelect_add">Condition</label>
                            </div>
                            <select class="custom-select" id="conditionSelect_add" name="condition">
                                <option selected value="0">Choose...</option>
                                <option value="1">Looks like new</option>
                                <option value="2">Pre-owned but no writing</option>
                                <option value="3">Only name written on cover</option>
                                <option value="4">Highlighted and more</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col col-md-6">
                                Display on showcase
                            </div>
                            <div class="col col-md-6">
                                <input type="checkbox" checked data-toggle="toggle" data-onstyle="navy"
                                    name="onShowcase">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col">
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" name="addimage" id="addimage">
                                    <label class="custom-file-label" for="addimage">Select book photo</label>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="form-group"><button class="btn btn-block btn-navy" type="submit" name="profile_page_btn"
                            value="add_book_btn">Add Book</button></div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" role="dialog" tabindex="-1" id="addBookSchoolModeForm">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" style="color: #14274e;">Add New Book</h4><button type="button" class="close"
                    data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
                <form method="post" enctype="multipart/form-data">
                    <div class="form-group"><input class="form-control" type="text" placeholder="Title" name="name"
                            value="{{ request.form.name}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')"></div>
                    <div class="form-group"><input class="form-control" type="text" placeholder="Author" name="author"
                            value="{{ request.form.author}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')"></div>
                    <div class="form-group"><input class="form-control" type="text" placeholder="Publisher"
                            name="publisher" value="{{ request.form.publisher}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')"></div>
                    <div class="form-group"><input class="form-control" type="number" name="publish_year"
                            placeholder="Publish Year" value="{{ request.form.publish_year}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')"></div>
                    <div class="form-group"><input class="form-control" type="number" name="number_of_pages"
                            placeholder="Number of Pages" value="{{ request.form.number_of_pages}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')">
                    </div>
                    <div class="form-group"><input class="form-control" type="number" name="price" placeholder="Price"
                            value="{{ request.form.price}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')">
                    </div>
                    <div class="form-group"><input class="form-control" type="text" name="university"
                            placeholder="University" value="{{ request.form.university}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')">
                    </div>
                    <div class="form-group"><input class="form-control" type="text" name="professor"
                            placeholder="Professor" value="{{ request.form.professor}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')">
                    </div>
                    <div class="form-group"><input class="form-control" type="text" name="term" placeholder="Term"
                            value="{{ request.form.term}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')">
                    </div>
                    <div class="form-group"><input class="form-control" type="text" name="course" placeholder="Course"
                            value="{{ request.form.course}}" required
                            oninvalid="this.setCustomValidity('This field is required')"
                            oninput="setCustomValidity('')">
                    </div>
                    <div class="form-group">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <label class="input-group-text" for="conditionSelect_add">Condition</label>
                            </div>
                            <select class="custom-select" id="conditionSelect_add_schoolmode" name="condition">
                                <option selected value="0">Choose...</option>
                                <option value="1">Looks like new</option>
                                <option value="2">Pre-owned but no writing</option>
                                <option value="3">Only name written on cover</option>
                                <option value="4">Highlighted and more</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col col-md-6">
                                Display on showcase
                            </div>
                            <div class="col col-md-6">
                                <input type="checkbox" checked data-toggle="toggle" data-onstyle="navy"
                                    name="onShowcase">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col">
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" name="addimage"
                                        id="addimage_schoolmode">
                                    <label class="custom-file-label" for="addimage_schoolmode">Select book photo</label>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="form-group"><button class="btn btn-block btn-navy" type="submit" name="profile_page_btn"
                            value="add_book_schoolmode_btn">Add Book to School Mode</button></div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" role="dialog" tabindex="-1" id="updateBookForm">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" style="color: #14274e;">Update Book</h4><button type="button" class="close"
                    data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
                <h6 id="modal_body"></h6>
                <form method="post" enctype="multipart/form-data">
                    <div class="form-group"><input class="form-control" style="display: none;" name="book_id"
                            id="book_id" value="">
                    </div>
                    <div class="form-group"><input class="form-control" type="text" id="title" placeholder="Title"
                            name="name" value="{{ request.form.name}}"></div>
                    <div class="form-group"><input class="form-control" type="text" id="author" placeholder="Author"
                            name="author" value="{{ request.form.author}}"></div>
                    <div class="form-group"><input class="form-control" type="text" id="publisher"
                            placeholder="Publisher" name="publisher" value="{{ request.form.publisher}}"></div>
                    <div class="form-group"><input class="form-control" type="number" name="publish_year"
                            placeholder="Publish Year" value="{{ request.form.publish_year}}"></div>
                    <div class="form-group"><input class="form-control" type="number" name="number_of_pages"
                            placeholder="Number of Pages" value="{{ request.form.number_of_pages}}">
                    </div>
                    <div class="form-group"><input class="form-control" type="number" name="price" placeholder="Price"
                            value="{{ request.form.price}}">
                    </div>
                    <div class="form-group">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <label class="input-group-text" for="conditionSelect">Condition</label>
                            </div>
                            <select class="custom-select" id="conditionSelect" name="condition">
                                <option selected value="0">Choose...</option>
                                <option value="1">Looks like new</option>
                                <option value="2">Pre-owned but no writing</option>
                                <option value="3">Only name written on cover</option>
                                <option value="4">Highlighted and more</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col col-md-6">
                                Display on showcase
                            </div>
                            <div class="col col-md-6">
                                <input type="checkbox" checked data-toggle="toggle" data-onstyle="navy"
                                    name="onShowcase">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="row">
                            <div class="col">
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" name="updateimage" id="updateimage">
                                    <label class="custom-file-label" for="updateimage">Select book photo</label>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="form-group"><button class="btn btn-block btn-navy" type="submit" name="profile_page_btn"
                            value="update_book_btn">Update Book</button></div>
                </form>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" role="dialog" tabindex="-1" id="deleteBook">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" style="color: #14274e;">Delete Book</h4><button type="button" class="close"
                    data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
                <h6>Are you sure you want to delete this book?</h6>
                <form method="post">
                    <div class="form-group"><input class="form-control" style="display: none;" name="book_id_delete"
                            id="book_id_delete" value="">
                    </div>
                    <div class="form-group"><button class="btn btn-block btn-navy" type="submit" name="profile_page_btn"
                            value="delete_book_btn">Delete Book</button></div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" role="dialog" tabindex="-1" id="deleteAccount">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" style="color: #14274e;">Delete Account</h4><button type="button" class="close"
                    data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
                <h6>Are you sure you want to delete your account? THIS CANNOT BE UNDONE!</h6>
                <form method="post">
                    <div class="form-group"><input class="form-control" style="display: none;" name="book_id_delete"
                            id="book_id_delete" value="">
                    </div>
                    <div class="form-group"><button class="btn btn-block btn-navy" type="submit" name="profile_page_btn"
                            value="delete_account_btn">Delete Account</button></div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" role="dialog" tabindex="-1" id="updateUserInfo">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" style="color: #14274e;">Update User Information</h4><button type="button"
                    class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
                <form method="post">
                    <div class="form-group"><input class="form-control" type="text" placeholder="New Name"
                            name="newname" value="{{ request.form.newname}}"></div>
                    <div class="form-group"><input class="form-control" type="text" placeholder="New Address"
                            name="newaddress" value="{{ request.form.newadress}}"></div>
                    <div class="form-group"><input class="form-control" type="password" name="newpassword"
                            placeholder="New Password" value="{{ request.form.newpassword}}">
                    </div>
                    <div class="form-group"><button class="btn btn-block btn-navy" type="submit" name="profile_page_btn"
                            value="update_user_info_btn">Update User Information</button></div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="jumbotron bg-cover" style="background: #f1f6f9;min-height: 100vh;margin-bottom: 0px;padding-bottom: 0px;">
    <div class="container"
        style="margin-top: 30px;margin-right: 0px;margin-left: 0px;max-width: 100%;margin-bottom: 0px;min-height: 85vh;">
        <div class="row" style="margin-left: 30px;margin-right: 30px;">
            <div class="col col-md-3"
                style="box-shadow: -11px 0px 20px 0px #808080;border-radius: 8px;background: #f1f6f9;min-height: 75vh;">
                <h1 style="margin-top: 30px;margin-bottom: 30px;">{{name}}</h1>
                <h2 style="margin-top: 30px;margin-bottom: 30px;">Seller Point: {{point}}</h2>
                <button class="btn btn-block btn-outline-navy" type="button" style="margin-bottom: 20px;"
                    data-toggle="modal" data-target="#addBookForm">add book</button>
                <button class="btn btn-block btn-outline-navy" type="button" style="margin-bottom: 20px;"
                    data-toggle="modal" data-target="#addBookSchoolModeForm">add book to school mode</button>
                <a class="btn btn-block btn-outline-navy" type="button" style="margin-bottom: 20px;"
                    href="{{ url_for('shop.wishlist1')}}">wishlist
                    1</a>
                <a class="btn btn-block btn-outline-navy" type="button" style="margin-bottom: 20px;"
                    href="{{ url_for('profile.wishlist2')}}">notes for future books</a>
                <a class="btn btn-block btn-outline-navy" type="button" style="margin-bottom: 20px;"
                    href="{{ url_for('shop.basket')}}">shopping cart</a>
                <a class="btn btn-block btn-outline-navy" type="button" style="margin-bottom: 20px;"
                    href="{{ url_for('shop.past_orders')}}">past
                    orders</a>
                <button class="btn btn-block btn-outline-navy" type="button" data-toggle="modal"
                    data-target="#updateUserInfo" style="margin-bottom: 20px;">update
                    information</button>
                <button class="btn btn-block btn-outline-navy" type="button" data-toggle="modal"
                    data-target="#deleteAccount" style="margin-bottom: 20px;">delete account</button>
            </div>
            <div class="col offset-xl-0">
                <div class="row">
                    {% for book in books %}

                    <div class="col col-md-4" style="margin-top: 10px;margin-bottom: 10px;">
                        <div class="flip-card"
                            style="margin-top: 10px;margin-right: 10px;margin-bottom: 10px;margin-left: 10px;color: rgba(33,37,41,0);width: 230px;height: 280px;">
                            <div class="flip-card-inner" style="height: 280px;width: 230px;">
                                <div class="flip-card-front" style="background: rgba(187,187,187,0);"><img
                                        class="img-fluid" src="data:image/png;base64,{{ book.book_image }}"
                                        style="max-width: 100%;max-height: 100%;"></div>
                                <div class="flip-card-back" style="background: #394867;">
                                    <button class="btn" type="button" aria-label="Left Align"
                                        style="margin-bottom: 20px;" data-toggle="modal" data-target="#deleteBook"
                                        name="delete" value={{book.id}} id="delete_{{book.id}}"><span
                                            class="fas fa-trash-alt" style="color: #fff0f0;"
                                            aria-hidden="true"></span></button>

                                    <div class="col" style="margin-top: 10%;">
                                        <h5 style="color: #f1f6f9;" id="update_{{book.id}}_title"
                                            value="{{book.title}}">{{book.title}}</h5>
                                        <h5 style="color: #f1f6f9;" id="update_{{book.id}}_author"
                                            value="{{book.author}}">{{book.author}}</h5>
                                        <h5 style="color: #f1f6f9;" id="update_{{book.id}}_publisher"
                                            value={{book.publisher}}>{{book.publisher}}</h5>
                                    </div>

                                    <button class="btn  btn-little-white" type="button" style="margin-bottom: 20px;"
                                        data-toggle="modal" data-target="#updateBookForm" name="update"
                                        value={{book.id}} id="update_{{book.id}}">update
                                        book</button>

                                </div>
                            </div>
                        </div>
                    </div>

                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(':button').each(function () {
        $(this).click(function () {
            at = $(this).attr('id')
            title = "#" + at + "_title"
            title_value = $(title).attr('value')
            author = "#" + at + "_author"
            author_value = $(author).attr('value')
            publisher = "#" + at + "_publisher"
            publisher_value = $(publisher).attr('value')
            $("#title").attr('Placeholder', title_value)
            $("#author").attr('Placeholder', author_value)
            $("#publisher").attr('Placeholder', publisher_value)
            $("#book_id").attr('value', at);
            $("#book_id_delete").attr('value', at);
        });
    });
</script>

{% endblock %}